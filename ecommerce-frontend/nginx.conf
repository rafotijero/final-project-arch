server {
    listen 80;
    server_name localhost;
    root /usr/share/nginx/html;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # Proxy para evitar CORS en desarrollo/producción si se usa misma origen
    # Aunque en docker-compose usaremos puertos distintos, este proxy es útil si se consolida.
    # Pero aquí el frontend llama a URLs absolutas definidas en ENV.
    # Sin embargo, si el env es relativo, nginx puede proxy.
    # En este setup, React usa VITE_..._URL que apuntan a localhost:8081 etc (desde navegador del cliente).
    # Este bloque es opcional si el cliente accede directo a los servicios, pero útil si queremos single domain.
    # Dejémoslo como referencia o para proxy reverso si decidimos usar /api/... relative paths.
    
    location /api/auth {
        proxy_pass http://auth-service:8081;
    }
    
    location /api/products {
        proxy_pass http://product-service:8082;
    }
    
    location /api/orders {
        proxy_pass http://order-service:8083;
    }
}
